{"dependencies":[{"name":"../../util.js","loc":{"line":14,"column":23}},{"name":"../../structs/LRUCache.js","loc":{"line":15,"column":21}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _util = require(\"../../util.js\");\n\nvar _LRUCache = require(\"../../structs/LRUCache.js\");\n\nvar _LRUCache2 = _interopRequireDefault(_LRUCache);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar __extends = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\n/**\n * @module ol/render/canvas/LabelCache\n */\n/**\n * @classdesc\n * Cache of pre-rendered labels.\n */\nvar LabelCache = /** @class */function (_super) {\n  __extends(LabelCache, _super);\n  /**\n   * @inheritDoc\n   */\n  function LabelCache(opt_highWaterMark) {\n    var _this = _super.call(this, opt_highWaterMark) || this;\n    _this.consumers = {};\n    return _this;\n  }\n  LabelCache.prototype.clear = function () {\n    this.consumers = {};\n    _super.prototype.clear.call(this);\n  };\n  /**\n   * @override\n   * @param {string} key Label key.\n   * @param {import(\"./Executor.js\").default} consumer Label consumer.\n   * @return {HTMLCanvasElement} Label.\n   */\n  LabelCache.prototype.get = function (key, consumer) {\n    var canvas = _super.prototype.get.call(this, key);\n    var consumerId = (0, _util.getUid)(consumer);\n    if (!(consumerId in this.consumers)) {\n      this.consumers[consumerId] = {};\n    }\n    this.consumers[consumerId][key] = true;\n    return canvas;\n  };\n  LabelCache.prototype.prune = function () {\n    outer: while (this.canExpireCache()) {\n      var key = this.peekLastKey();\n      for (var consumerId in this.consumers) {\n        if (key in this.consumers[consumerId]) {\n          break outer;\n        }\n      }\n      var canvas = this.pop();\n      canvas.width = 0;\n      canvas.height = 0;\n      for (var consumerId in this.consumers) {\n        delete this.consumers[consumerId][key];\n      }\n    }\n  };\n  /**\n   * @param {import(\"./Executor.js\").default} consumer Label consumer.\n   */\n  LabelCache.prototype.release = function (consumer) {\n    delete this.consumers[(0, _util.getUid)(consumer)];\n  };\n  return LabelCache;\n}(_LRUCache2.default);\nexports.default = LabelCache;\n//# sourceMappingURL=LabelCache.js.map"},"hash":"32d255e8dc02c868a2794cfc92866225"}